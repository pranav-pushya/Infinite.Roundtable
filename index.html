<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite Roundtable</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0);
            background-size: 2rem 2rem;
            color: #f3f4f6;
        }
        .persona-card {
            border: 1px solid #374151;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .persona-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: all 0.6s ease;
        }
        .persona-card:hover:before {
            left: 100%;
        }
        .persona-card:hover {
            border-color: #4f46e5;
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(79, 70, 229, 0.2);
        }
        .loader {
            border: 4px solid #374151;
            border-top: 4px solid #4f46e5;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4f46e5;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6366f1;
        }
    </style>
</head>
<body class="antialiased">
    <div id="app" class="min-h-screen flex flex-col items-center p-4 sm:p-6 lg:p-8">
        
        <header class="text-center mb-8 w-full max-w-4xl">
            <h1 class="text-4xl sm:text-5xl font-bold tracking-tight text-white">
                Infinite<span class="text-indigo-500">.</span>Roundtable
            </h1>
            <p class="mt-3 text-lg text-gray-400 max-w-2xl mx-auto">
                Explore the infinite 'what ifs'. Introduce an innovation and watch the experts debate its ripple effects.
            </p>
        </header>

        <main class="w-full max-w-4xl">
            <!-- Input Section -->
            <div class="bg-gray-800/80 backdrop-blur-sm rounded-lg p-6 shadow-2xl border border-gray-700">
                <div class="flex flex-col md:flex-row gap-4">
                    <input id="conceptInput" type="text" placeholder="Enter a concept, e.g., 'A home kit for gene editing'" class="flex-grow bg-gray-900 text-white placeholder-gray-500 border border-gray-600 rounded-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition">
                    <button id="generateBtn" class="bg-indigo-600 text-white font-semibold py-3 px-6 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-indigo-500 transition duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a6 6 0 00-6 6c0 1.887-.454 3.665-1.257 5.234a.75.75 0 00.515 1.076 32.91 32.91 0 0013.484 0 .75.75 0 00.515-1.076A11.446 11.466 0 0116 8a6 6 0 00-6-6zM8.5 16a1.5 1.5 0 103 0h-3z" /></svg>
                        <span>Start Discussion</span>
                    </button>
                </div>
                <div id="example-prompts" class="flex flex-wrap gap-2 mt-4">
                     <!-- Example prompts will be injected here -->
                </div>
            </div>

            <!-- Discussion & History Section -->
            <div id="discussion-header" class="mt-8 flex justify-between items-center hidden">
                <h2 class="text-2xl font-bold text-white">Discussion</h2>
                <button id="clearBtn" class="text-sm text-gray-400 hover:text-white hover:bg-gray-700 rounded-md px-3 py-1 transition">Clear Discussion</button>
            </div>
            
            <div id="discussion-container" class="mt-4 space-y-6">
                 <!-- Discussion cards or history prompt will be injected here -->
            </div>
            
            <!-- Error Message -->
            <div id="error-message" class="hidden mt-6 bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-lg relative" role="alert">
                <strong class="font-bold">Oops!</strong>
                <span class="block sm:inline" id="error-text">Something went wrong. Please try again.</span>
            </div>
        </main>
        
        <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>Powered by a mock API. An exploration in AI-driven perspective simulation.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const conceptInput = document.getElementById('conceptInput');
            const generateBtn = document.getElementById('generateBtn');
            const discussionContainer = document.getElementById('discussion-container');
            const discussionHeader = document.getElementById('discussion-header');
            const clearBtn = document.getElementById('clearBtn');
            const errorMessage = document.getElementById('error-message');
            const errorText = document.getElementById('error-text');
            const examplePromptsContainer = document.getElementById('example-prompts');

            const examplePrompts = [
                "AI that can perfectly mimic any human voice",
                "Commercially available flying cars",
                "A universal basic income funded by AI labor",
                "Brain-computer interfaces for direct thought communication"
            ];

            const personas = {
                "Ethicist": {
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-rose-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-.778.099-1.533.284-2.253m0 0A17.919 17.919 0 0012 7.5c3.162 0 6.133.815 8.716 2.247" /></svg>`,
                    color: 'rose-400',
                    title: 'The Ethicist'
                },
                "Technologist": {
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-sky-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>`,
                    color: 'sky-400',
                    title: 'The Technologist'
                },
                "Economist": {
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>`,
                    color: 'emerald-400',
                    title: 'The Economist'
                },
                "Sociologist": {
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>`,
                    color: 'amber-400',
                    title: 'The Sociologist'
                },
                 "Futurist": {
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>`,
                    color: 'purple-400',
                    title: 'The Futurist'
                }
            };
            
            // --- Initialization ---
            function init() {
                // Populate example prompts
                examplePrompts.forEach(prompt => {
                    const button = document.createElement('button');
                    button.textContent = prompt;
                    button.className = 'text-xs bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white rounded-full px-3 py-1 transition';
                    button.onclick = () => {
                        conceptInput.value = prompt;
                        generateDiscussion();
                    };
                    examplePromptsContainer.appendChild(button);
                });

                // Check for saved discussion
                const savedDiscussion = localStorage.getItem('infiniteRoundtableDiscussion');
                if (savedDiscussion) {
                    const { concept, discussion } = JSON.parse(savedDiscussion);
                    renderDiscussion(discussion, false);
                    conceptInput.value = concept;
                }
            }

            // --- Event Listeners ---
            generateBtn.addEventListener('click', generateDiscussion);
            conceptInput.addEventListener('keyup', (e) => e.key === 'Enter' && generateDiscussion());
            clearBtn.addEventListener('click', () => {
                discussionContainer.innerHTML = '';
                discussionHeader.classList.add('hidden');
                conceptInput.value = '';
                localStorage.removeItem('infiniteRoundtableDiscussion');
            });

            // --- Core Functions ---
            async function generateDiscussion() {
                const concept = conceptInput.value.trim();
                if (!concept) {
                    showError("Please enter a concept to discuss.");
                    return;
                }

                setLoadingState(true);
                try {
                    // This now calls the mock function instead of the real API
                    const discussion = await getMockDiscussion(concept);
                    renderDiscussion(discussion, true);
                    localStorage.setItem('infiniteRoundtableDiscussion', JSON.stringify({ concept, discussion }));

                } catch (error) {
                    console.error('Error generating discussion:', error);
                    showError(error.message || 'Failed to generate discussion.');
                } finally {
                    setLoadingState(false);
                }
            }
            
            // =================================================================================
            // MOCK API FUNCTION - This simulates the AI response without needing an API key.
            // =================================================================================
            async function getMockDiscussion(concept) {
                console.log(`Using mock discussion for concept: "${concept}"`);
                // Simulate a network delay to make the loading animation visible
                await new Promise(resolve => setTimeout(resolve, 1500));

                // Return a static, hardcoded discussion that incorporates the user's concept
                return [
                    { "persona": "Technologist", "statement": `Technically speaking, achieving "${concept}" is within the realm of possibility. The primary hurdles would be in ensuring stability and scalability.` },
                    { "persona": "Economist", "statement": `The market disruption from "${concept}" would be immense. We're talking about the creation of entirely new industries, while making others obsolete overnight.` },
                    { "persona": "Sociologist", "statement": `I'm more concerned about the societal impact. How would a world with "${concept}" affect our daily routines, our relationships, and our sense of community?` },
                    { "persona": "Ethicist", "statement": `The ethical tightrope we'd have to walk is perilous. The potential for misuse of "${concept}" is profound, and we need to establish clear guidelines before it becomes widespread.` },
                    { "persona": "Futurist", "statement": `This is just the beginning. Imagine a future where "${concept}" is as common as a smartphone. It will fundamentally redefine what it means to be human.` },
                    { "persona": "Technologist", "statement": `I believe the scalability issues are being overstated. Moore's Law, or its equivalent in the relevant field, will make the technology accessible to all within a decade.` },
                    { "persona": "Economist", "statement": `Accessibility is key. If "${concept}" is only available to the wealthy, it will exacerbate social inequality to an unprecedented degree.` },
                    { "persona": "Ethicist", "statement": `Exactly. That raises a critical point about equity. Is it ethical to develop such a powerful tool if it cannot be distributed fairly to all of humanity?` }
                ];
            }


            // --- UI Functions ---
            function renderDiscussion(discussion, animate) {
                discussionContainer.innerHTML = '';
                discussionHeader.classList.remove('hidden');
                discussion.forEach((turn, index) => {
                    const personaInfo = personas[turn.persona] || { icon: '', color: 'gray-400', title: 'Unknown' };
                    const card = document.createElement('div');
                    card.className = `persona-card bg-gray-800/50 backdrop-blur-sm rounded-lg shadow-md p-5 flex gap-5 items-start ${animate ? 'fade-in' : ''}`;
                    if (animate) card.style.animationDelay = `${index * 150}ms`;

                    card.innerHTML = `
                        <div class="flex-shrink-0 w-12 h-12 rounded-full bg-gray-700/50 flex items-center justify-center border-2 border-${personaInfo.color}">
                            ${personaInfo.icon}
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-bold text-lg text-${personaInfo.color}">${personaInfo.title}</h3>
                            <p class="text-gray-300 mt-1">${turn.statement.replace(/\n/g, '<br>')}</p>
                        </div>`;
                    discussionContainer.appendChild(card);
                });
            }

            function setLoadingState(isLoading) {
                generateBtn.disabled = isLoading;
                if (isLoading) {
                    discussionContainer.innerHTML = `<div class="flex justify-center items-center p-10"><div class="loader"></div></div>`;
                    discussionHeader.classList.add('hidden');
                    hideError();
                    generateBtn.innerHTML = `<div class="loader !w-5 !h-5"></div><span>Generating...</span>`;
                } else {
                    generateBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a6 6 0 00-6 6c0 1.887-.454 3.665-1.257 5.234a.75.75 0 00.515 1.076 32.91 32.91 0 0013.484 0 .75.75 0 00.515-1.076A11.446 11.446 0 0116 8a6 6 0 00-6-6zM8.5 16a1.5 1.5 0 103 0h-3z" /></svg><span>Start Discussion</span>`;
                }
            }

            function showError(message) {
                errorText.textContent = message;
                errorMessage.classList.remove('hidden');
            }

            function hideError() {
                errorMessage.classList.add('hidden');
            }
            
            init();
        });
    </script>
</body>
</html>

